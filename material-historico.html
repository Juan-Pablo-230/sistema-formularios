<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitud de clases</title>
    <link rel="stylesheet" href="/css/formularios.css">
    <link rel="stylesheet" href="/css/material-historico.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ“š Solicitar de clases</h1>
        
        <div class="back-btn-container">
            <button onclick="window.location.href='/index.html'" class="back-btn">â† Volver al MenÃº Principal</button>
            <button id="logoutBtn" class="back-btn logout-btn">ğŸšª Cerrar SesiÃ³n</button>
        </div>
        
        <div id="statusMessage" class="status-message" style="display: none;"></div>
        
        <!-- Selectores de AÃ±o y Mes -->
        <div class="filtros-container" style="margin-bottom: 20px; padding: 20px; background: var(--bg-card); border-radius: 10px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div>
                    <label for="anoSeleccionado" style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--text-primary);">ğŸ“… AÃ±o</label>
                    <select id="anoSeleccionado" class="filtro-select" style="width: 100%; padding: 12px; border-radius: 8px;">
                        <option value="">Seleccione el aÃ±o</option>
                    </select>
                </div>
                
                <div>
                    <label for="mesSeleccionado" style="display: block; margin-bottom: 8px; font-weight: bold; color: var(--text-primary);">ğŸ“† Mes</label>
                    <select id="mesSeleccionado" class="filtro-select" style="width: 100%; padding: 12px; border-radius: 8px;" disabled>
                        <option value="">Primero seleccione el aÃ±o</option>
                    </select>
                </div>
            </div>
            <small class="field-info" style="display: block; text-align: center;">Seleccione aÃ±o y mes para ver las clases disponibles</small>
        </div>
        
        <form id="materialHistoricoForm" style="display: none;">
            <div class="form-group" id="material">
                <label for="claseSeleccionada">Seleccionar Clase HistÃ³rica *</label>
                <select id="claseSeleccionada" name="clase" required>
                    <option value="">Primero seleccione aÃ±o y mes</option>
                </select>
                <small class="field-info">Seleccione la clase para acceder a su material grabado</small>
            </div>

            <div class="form-group" id="material">
                <label for="emailUsuario">Correo ElectrÃ³nico</label>
                <input type="email" id="emailUsuario" name="email" readonly>
                <small class="field-info">Correo asociado a su cuenta</small>
            </div>

            <button type="submit" class="submit-btn">ğŸ” Obtener Material de la Clase</button>
        </form>
        
        <!-- Mensaje cuando no hay clases en el perÃ­odo seleccionado -->
        <div id="sinClasesMensaje" class="sin-clases-mensaje" style="display: none; text-align: center; padding: 40px; background: var(--bg-card); border-radius: 10px; margin-top: 20px;">
            <div style="font-size: 3em; margin-bottom: 15px;">ğŸ“­</div>
            <h3 style="color: var(--text-primary); margin-bottom: 10px;">No hay clases disponibles</h3>
            <p style="color: var(--text-secondary);">No se encontraron clases para el perÃ­odo seleccionado.</p>
        </div>
        
        <!-- SecciÃ³n de enlaces de material -->
        <div id="materialLinks" class="material-links">
            <h2 style="text-align: center; margin-bottom: 20px;">ğŸ“ Material de la Clase</h2>
            
            <div id="claseInfo" class="class-info">
                <h3 id="claseNombre"></h3>
                <p id="claseDescripcion"></p>
                <p id="claseFecha" style="color: var(--text-muted); font-size: 0.9em; margin-top: 10px;"></p>
            </div>
            
            <div class="links-container" id="linksContainer">
                <!-- Los enlaces se llenarÃ¡n dinÃ¡micamente -->
            </div>
            
            <div class="action-buttons" style="margin-top: 30px; text-align: center;">
                <button id="solicitarOtraClase" class="back-btn">â† Solicitar otra clase</button>
            </div>
        </div>
        
        <div id="misSolicitudes" style="margin-top: 40px;">
            <h2 style="text-align: center; margin-bottom: 20px;">ğŸ“‹ Mi Historial de Solicitudes</h2>
            <table class="inscripciones-table" id="tablaMisSolicitudes">
                <thead>
                    <tr>
                        <th>Clase</th>
                        <th>Fecha Clase</th>
                        <th>Fecha Solicitud</th>
                        <th>Material</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Se llenarÃ¡ dinÃ¡micamente -->
                </tbody>
            </table>
        </div>
    </div>

    <script src="/js/auth.js"></script>
    <script src="/js/material-historico.js"></script>
</body>
</html>